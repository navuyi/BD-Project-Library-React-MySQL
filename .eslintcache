[{"C:\\Users\\rafal\\Pulpit\\bd-project-react-2\\src\\index.js":"1","C:\\Users\\rafal\\Pulpit\\bd-project-react-2\\src\\App.js":"2","C:\\Users\\rafal\\Pulpit\\bd-project-react-2\\src\\components\\Signin.js":"3","C:\\Users\\rafal\\Pulpit\\bd-project-react-2\\src\\components\\Navbar.js":"4","C:\\Users\\rafal\\Pulpit\\bd-project-react-2\\src\\components\\Signup.js":"5","C:\\Users\\rafal\\Pulpit\\bd-project-react-2\\src\\subpages\\Home.js":"6","C:\\Users\\rafal\\Pulpit\\bd-project-react-2\\src\\subpages\\About.js":"7","C:\\Users\\rafal\\Pulpit\\bd-project-react-2\\src\\components\\Books.js":"8","C:\\Users\\rafal\\Pulpit\\bd-project-react-2\\src\\components\\Account.js":"9","C:\\Users\\rafal\\Pulpit\\bd-project-react-2\\src\\components\\More.js":"10","C:\\Users\\rafal\\Pulpit\\bd-project-react-2\\src\\components\\PasswordChange.js":"11","C:\\Users\\rafal\\Pulpit\\bd-project-react-2\\src\\components\\Manage.js":"12","C:\\Users\\rafal\\Pulpit\\bd-project-react-2\\src\\components\\Returns.js":"13","C:\\Users\\rafal\\Pulpit\\bd-project-react-2\\src\\components\\Collection.js":"14","C:\\Users\\rafal\\Pulpit\\bd-project-react-2\\src\\components\\Collection_AddData.js":"15","C:\\Users\\rafal\\Pulpit\\bd-project-react-2\\src\\components\\Collection_AddBooks.js":"16"},{"size":350,"mtime":1610993477123,"results":"17","hashOfConfig":"18"},{"size":4224,"mtime":1610993485760,"results":"19","hashOfConfig":"18"},{"size":2890,"mtime":1610990674426,"results":"20","hashOfConfig":"18"},{"size":2284,"mtime":1610557264262,"results":"21","hashOfConfig":"18"},{"size":4312,"mtime":1610043481224,"results":"22","hashOfConfig":"18"},{"size":226,"mtime":1609795952212,"results":"23","hashOfConfig":"18"},{"size":231,"mtime":1609626539503,"results":"24","hashOfConfig":"18"},{"size":13088,"mtime":1610993409736,"results":"25","hashOfConfig":"18"},{"size":5998,"mtime":1610569830297,"results":"26","hashOfConfig":"18"},{"size":4826,"mtime":1610995088259,"results":"27","hashOfConfig":"18"},{"size":4442,"mtime":1610496907574,"results":"28","hashOfConfig":"18"},{"size":1328,"mtime":1610560496395,"results":"29","hashOfConfig":"18"},{"size":6878,"mtime":1610743531292,"results":"30","hashOfConfig":"18"},{"size":1039,"mtime":1610755819735,"results":"31","hashOfConfig":"18"},{"size":5320,"mtime":1610814702424,"results":"32","hashOfConfig":"18"},{"size":5400,"mtime":1610827698569,"results":"33","hashOfConfig":"18"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},"1xjb3mv",{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"49"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":2,"source":"52","usedDeprecatedRules":"36"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":1,"source":"55","usedDeprecatedRules":"36"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"62","usedDeprecatedRules":"36"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":1,"source":"65","usedDeprecatedRules":"36"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":1,"source":"68","usedDeprecatedRules":"36"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"71","usedDeprecatedRules":"36"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},"C:\\Users\\rafal\\Pulpit\\bd-project-react-2\\src\\index.js",[],["74","75"],"C:\\Users\\rafal\\Pulpit\\bd-project-react-2\\src\\App.js",[],"C:\\Users\\rafal\\Pulpit\\bd-project-react-2\\src\\components\\Signin.js",[],"C:\\Users\\rafal\\Pulpit\\bd-project-react-2\\src\\components\\Navbar.js",[],"C:\\Users\\rafal\\Pulpit\\bd-project-react-2\\src\\components\\Signup.js",[],"C:\\Users\\rafal\\Pulpit\\bd-project-react-2\\src\\subpages\\Home.js",[],"C:\\Users\\rafal\\Pulpit\\bd-project-react-2\\src\\subpages\\About.js",[],["76","77"],"C:\\Users\\rafal\\Pulpit\\bd-project-react-2\\src\\components\\Books.js",["78","79","80","81","82","83","84","85","86","87","88"],"import axios from 'axios';\r\nimport React from 'react';\r\nimport styles from './styles/books.module.css';\r\nimport More from './More';\r\nimport Select from 'react-select';\r\n\r\nimport NumericInput from 'react-numeric-input';\r\n\r\nclass Books extends React.Component{\r\n  constructor(){\r\n    super();\r\n    this.state = {\r\n      isLoading: true,\r\n      loadingInfo: \"Loading...\",\r\n      authors: [],\r\n      categories: [],\r\n      publishers: [],\r\n      books: [],\r\n      numberOfPages: null,\r\n      isMoreVisible: false,\r\n      selectedBook: [],\r\n      // Filters\r\n      titleFilter: \"\",\r\n      categoryFilter: \"\",\r\n      authorFilter: \"\",\r\n      publisherFilter: \"\",\r\n      pageFilter: 1,\r\n\r\n      titleFilterSet: \"\",\r\n      categoryFilterSet: \"\",\r\n      authorFilterSet: \"\",\r\n      publisherFilterSet: \"\",\r\n      pageFilterSet: 1\r\n    }\r\n    // Bindings\r\n    this.refreshToken = this.refreshToken.bind(this);\r\n    this.handleFilter = this.handleFilter.bind(this);\r\n    this.filter = this.filter.bind(this);\r\n    this.fetchInitialData = this.fetchInitialData.bind(this);\r\n    this.handleSelectChange = this.handleSelectChange.bind(this);\r\n    this.handleInputChange = this.handleInputChange.bind(this);\r\n    this.handleMore = this.handleMore.bind(this);\r\n    this.closeMore = this.closeMore.bind(this);\r\n    this.changePage = this.changePage.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.pageFormat = this.pageFormat.bind(this);\r\n    this.eraseFilter = this.eraseFilter.bind(this);\r\n  }\r\n\r\n  refreshToken(){\r\n    var refresh_token = localStorage.getItem(\"refresh_token\");\r\n    axios.get(\"https://g20.labagh.pl/api/refresh\", {\r\n      headers: {\r\n        'Authorization': `Bearer ${refresh_token}`\r\n      }\r\n    }).then(function(response){\r\n      localStorage.setItem(\"token\", response.data.access_token);\r\n    }.bind(this)).catch((err) =>{\r\n      console.log(err);\r\n    })\r\n  }\r\n  componentDidMount(){\r\n    this.fetchInitialData();\r\n  }\r\n  fetchInitialData(){\r\n    const token = localStorage.getItem(\"token\");\r\n    const header = {headers: {'Authorization': `Bearer ${token}`}};\r\n    const url = \"https://g20.labagh.pl/api/get_ACP\";\r\n    \r\n    // Get ACP data (authors, categories, publishers)\r\n    axios.get(url, header)\r\n     .then(function(response){\r\n      //Get ACP data to filter selectors\r\n      var tmp_authors = [];\r\n      var tmp_categories = [];\r\n      var tmp_publishers = [];\r\n\r\n      response.data.authors.map((author) =>{\r\n        tmp_authors.push({\"value\": author[0], \"label\": author[1] + \" \" + author[2]})\r\n      });\r\n      response.data.categories.map((category) =>{\r\n        tmp_categories.push({\"value\": category[0], \"label\": category[1]})\r\n      });\r\n      response.data.publishers.map((publisher) =>{\r\n        tmp_publishers.push({\"value\": publisher[0], \"label\": publisher[1]})\r\n      });\r\n      tmp_authors.push({\"value\": \"\", \"label\": \"Any\"})\r\n      tmp_categories.push({\"value\": \"\", \"label\": \"Any\"})\r\n      tmp_publishers.push({\"value\": \"\", \"label\": \"Any\"})\r\n\r\n      \r\n      this.setState({\r\n        authors: tmp_authors,\r\n        categories: tmp_categories,\r\n        publishers: tmp_publishers\r\n      })\r\n     }.bind(this))\r\n     .catch(function(err){\r\n       if(err.response.status === 422 || err.response.status === 401){\r\n         this.refreshToken();\r\n         this.fetchInitialData();\r\n       }\r\n     }.bind(this))\r\n\r\n\r\n     // Get books data\r\n     const url_books = \"https://g20.labagh.pl/api/get_books\";\r\n     axios.get(url_books, header)\r\n     .then(function(response){\r\n      console.log(response.data);\r\n      var tmp_books = [];\r\n      response.data.slice(1).map((book) =>{\r\n        tmp_books.push({\r\n          id: book[0],\r\n          amount: book[1],\r\n          title: book[2],\r\n          year: book[3],\r\n          author: book[4]+\" \"+book[5],\r\n          publisher: book[6],\r\n          category: book[7]\r\n        })\r\n      })\r\n      this.setState({\r\n        books: tmp_books,\r\n        numberOfPages: response.data[0][0],\r\n        isLoading: false\r\n      });\r\n     }.bind(this))\r\n     .catch(function(err){\r\n      \r\n     }.bind(this))\r\n  }\r\n\r\n  handleInputChange(e){\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n  handleSelectChange(selectedOption, {name}){\r\n    console.log(selectedOption.value);\r\n    console.log(name);\r\n    this.setState({\r\n      [name]: selectedOption\r\n    });\r\n  }\r\n\r\n  handleFilter(e){\r\n    e.preventDefault();\r\n    this.setState({\r\n      pageFilter: 1,\r\n      isLoading: true,\r\n      loadingInfo: \"Loading...\",\r\n\r\n      titleFilterSet: this.state.titleFilter,\r\n      categoryFilterSet: this.state.categoryFilter.value,\r\n      authorFilterSet: this.state.authorFilter.value,\r\n      publisherFilterSet: this.state.publisherFilter.value,\r\n      pageFilterSet: this.state.pageFilter.value\r\n    }, () =>{\r\n      this.filter();\r\n    })\r\n  }\r\n  filter(){\r\n    const token = localStorage.getItem(\"token\");\r\n    const header = {headers: {'Authorization': `Bearer ${token}`}};\r\n    const url = \"https://g20.labagh.pl/api/get_books_filter\";\r\n    const data = {\r\n      title: this.state.titleFilterSet,\r\n      author_id: this.state.authorFilterSet,\r\n      category_id: this.state.categoryFilterSet,\r\n      publisher_id: this.state.publisherFilterSet,\r\n      page: this.state.pageFilter\r\n    }\r\n    axios.post(url, data, header)\r\n    .then(function(response){\r\n      console.log(response.data);\r\n      // Check if response.data is empty\r\n      if(response.data.pages===0){\r\n        const epmty_books = []\r\n        this.setState({\r\n          books: epmty_books,\r\n          isLoading: true,\r\n          loadingInfo: \"No matches\"\r\n        });\r\n        return 0;\r\n      }\r\n      var tmp_books = [];\r\n      response.data.filtered_books.map((book) =>{\r\n        tmp_books.push({\r\n          id: book[0],\r\n          amount: book[1],\r\n          title: book[2],\r\n          year: book[3],\r\n          author: book[4]+\" \"+book[5],\r\n          publisher: book[6],\r\n          category: book[7]\r\n        })\r\n      })\r\n      this.setState({\r\n        books: tmp_books,\r\n        isLoading: false,\r\n        numberOfPages: response.data.pages\r\n      });\r\n    }.bind(this))\r\n    .catch(function(err){\r\n      console.log(err);\r\n      if(err.response.status === 422 || err.response.status === 401){\r\n        this.refreshToken();\r\n        this.filter();\r\n      }\r\n    }.bind(this));\r\n  }\r\n  handleMore(e){\r\n    console.log(\"Showing more \");\r\n    this.setState({isMoreVisible: true});\r\n    // Define selected book to display in \"More\" component\r\n    this.state.books.map((book)=>{\r\n      // \"==\" below is the proper way despite the fact that compiler expects \"===\"\r\n      if(book.id == e.target.getAttribute('name')){\r\n        console.log(\"Found\");\r\n        this.setState({selectedBook: book});\r\n      }\r\n    })\r\n  }\r\n  // Function below will be executed inside More component to close itself\r\n  closeMore(){\r\n    console.log(\"Closing more\");\r\n    this.setState({isMoreVisible: false});\r\n  }\r\n\r\n  changePage(e){\r\n    if(e.target.getAttribute(\"name\") === \"prev\" && this.state.pageFilter>1){\r\n      this.setState({\r\n        pageFilter: this.state.pageFilter - 1\r\n      }, ()=>{this.filter()});\r\n    }\r\n    else if(e.target.getAttribute(\"name\") === \"next\" && this.state.pageFilter<this.state.numberOfPages){\r\n      this.setState({\r\n        pageFilter: this.state.pageFilter + 1\r\n      }, ()=>{this.filter()});\r\n    }\r\n  }\r\n  handleChange(selectedValue){\r\n    if(selectedValue<1){\r\n      this.setState({\r\n        pageFilter: this.state.pageFilter\r\n      })\r\n    }\r\n    else if(selectedValue>this.state.numberOfPages){\r\n      this.setState({\r\n        pageFilterSet: this.state.pageFilter\r\n      });\r\n    }\r\n    else{\r\n      this.setState({\r\n        pageFilter: selectedValue\r\n      }, () =>{\r\n        this.filter();\r\n      });\r\n    }\r\n  }\r\n  pageFormat(page){\r\n    return page+\"/\"+this.state.numberOfPages\r\n  }\r\n\r\n  eraseFilter(e){\r\n    console.log(this.state.titleFilter);\r\n    console.log(this.state.categoryFilter);\r\n    this.setState({\r\n      [e.target.getAttribute(\"name\")]: \"\"\r\n    });\r\n    \r\n  }\r\n\r\n  render(){ \r\n    var colorIndex = 0;\r\n    return(\r\n      <div>\r\n        <div className={styles.optionsPane}> \r\n          <div className={styles.optionsTitle}> Options </div>\r\n          <form onSubmit={this.handleFilter}>\r\n          <div className={styles.filtersContainer}>\r\n              <div>\r\n                <div className={styles.label}> Filter by title </div>\r\n                <div className={styles.inputWrapper}>\r\n                  <input\r\n                    className={styles.input}\r\n                    value={this.state.titleFilter}\r\n                    onChange={this.handleInputChange}\r\n                    name=\"titleFilter\"\r\n                    value={this.state.titleFilter}\r\n                  />\r\n                  <div className={styles.eraseFilter} onClick={this.eraseFilter} name=\"titleFilter\"></div>\r\n                </div>\r\n              </div>\r\n              \r\n              <div>\r\n                <div className={styles.label}> Filter by author </div>\r\n                <div className={styles.inputWrapper}>\r\n                  <Select\r\n                  className={styles.select}\r\n                  options={this.state.authors}\r\n                  maxMenuHeight={150}\r\n                  onChange={this.handleSelectChange}\r\n                  name=\"authorFilter\"\r\n                  value={this.state.authorFilter}\r\n                  />\r\n                  <div className={styles.eraseFilter} onClick={this.eraseFilter} name=\"authorFilter\"></div>\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <div className={styles.label} > Filter by category </div>\r\n                <div className={styles.inputWrapper}>\r\n                  <Select \r\n                    className={styles.select}\r\n                    options={this.state.categories}\r\n                    maxMenuHeight={150}\r\n                    onChange={this.handleSelectChange}\r\n                    name=\"categoryFilter\"\r\n                    value={this.state.categoryFilter}\r\n                  />\r\n                  <div className={styles.eraseFilter} onClick={this.eraseFilter} name=\"categoryFilter\"></div>\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <div className={styles.label} > Filter by Publisher </div>\r\n                <div className={styles.inputWrapper}>\r\n                  <Select \r\n                    className={styles.select}\r\n                    options={this.state.publishers}\r\n                    maxMenuHeight={150}\r\n                    onChange={this.handleSelectChange} \r\n                    name=\"publisherFilter\"\r\n                    value={this.state.publisherFilter}\r\n                  />\r\n                  <div className={styles.eraseFilter} onClick={this.eraseFilter} name=\"publisherFilter\"></div>\r\n                </div>\r\n              </div>\r\n              <button className={styles.filterButton}> Filter </button>\r\n          </div>\r\n          </form>\r\n        </div>\r\n        \r\n        {!this.state.isLoading ? \r\n        <div className={styles.wrapper}>\r\n        <div className={styles.displayPane}>\r\n          <table className={styles.table}>\r\n          <tbody>\r\n              <tr className={styles.tableTitleBar}>\r\n                <th> Title </th>\r\n                <th> Author </th>\r\n                <th > Category </th>\r\n                <th > Avaiable </th>\r\n                <th > More </th>\r\n              </tr>\r\n              {this.state.books.map((book) => {\r\n              const style = colorIndex%2===0 ? {backgroundColor: \"rgb(120, 121, 122)\"} : {backgroundColor: \"rgb(144, 145, 145)\"}\r\n              colorIndex += 1;\r\n              return  <tr style={style}> \r\n                        <td > {book.title} </td>\r\n                        <td > {book.author} </td>\r\n                        <td > {book.category} </td>\r\n                        <td > {book.amount} </td>\r\n                        <td ><button className={styles.moreButton} onClick={this.handleMore} name={book.id}> More </button></td>\r\n                      </tr>\r\n              })}\r\n          </tbody>\r\n          </table>\r\n          \r\n        </div>\r\n        <div className={styles.paginator}>\r\n          <div className={styles.pageNavbar}>\r\n            <div className={styles.prev} name=\"prev\" onClick={this.changePage}></div>\r\n            <NumericInput \r\n              min={1}\r\n              max={this.state.numberOfPages}\r\n              value={this.state.pageFilter}\r\n              style={false}\r\n              className={styles.pageInput}\r\n              onChange={this.handleChange}\r\n              format={this.pageFormat}\r\n            />\r\n            <div className={styles.next} name=\"next\" onClick={this.changePage}></div>\r\n          </div>\r\n        </div>\r\n        </div> : <div className={styles.loading}> {this.state.loadingInfo} </div>}\r\n        {this.state.isMoreVisible ? <More {... this.state} closeMore={this.closeMore} fetchDataFromAPI={this.filter} refreshToken={this.refreshToken}/> : null}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Books;","C:\\Users\\rafal\\Pulpit\\bd-project-react-2\\src\\components\\Account.js",["89","90"],"import React from 'react';\r\nimport styles from './styles/account.module.css';\r\nimport axios from 'axios';\r\nimport PasswordChange from './PasswordChange';\r\n\r\nclass Account extends React.Component{\r\n  constructor(){\r\n    super();\r\n    this.state = {\r\n      booksList: [],\r\n      userData: [],\r\n      isPasswordChangeVisible: false,\r\n      bookToExtend: null\r\n    }\r\n\r\n    // Bindings\r\n    this.fetchDataFromAPI = this.fetchDataFromAPI.bind(this);\r\n    this.refreshToken = this.refreshToken.bind(this);\r\n    this.handleClick = this.handleClick.bind(this);\r\n    this.closePasswordChange = this.closePasswordChange.bind(this);\r\n    this.handleBookExtend = this.handleBookExtend.bind(this);\r\n    this.extendBook = this.extendBook.bind(this);\r\n  }\r\n\r\n  refreshToken(){\r\n    var refresh_token = localStorage.getItem(\"refresh_token\");\r\n    axios.get(\"https://g20.labagh.pl/api/refresh\", {\r\n      headers: {\r\n        'Authorization': `Bearer ${refresh_token}`\r\n      }\r\n    }).then(function(response){\r\n      console.log(\"Adding fresh access token to localstorage\");\r\n      localStorage.setItem(\"token\", response.data.access_token);\r\n    }.bind(this)).catch((err) =>{\r\n      console.log(err);\r\n    })\r\n  }\r\n\r\n  fetchDataFromAPI(){\r\n    const token = localStorage.getItem(\"token\");\r\n    const data = {\r\n      user_id: localStorage.getItem(\"id\")\r\n    }\r\n    const header ={headers: {'Authorization': `Bearer ${token}`}}\r\n\r\n    axios.post(\"https://g20.labagh.pl/api/get_user_data\", data, header)\r\n    .then(function(response){\r\n      console.log(response.data);\r\n  \r\n\r\n      // Handle user data \r\n      var user_data = response.data[0]; // Always first array in response data ???\r\n      var tmpUserData = {\r\n        fname: user_data[0],\r\n        lname: user_data[1],\r\n        email: user_data[2],\r\n        read_books: user_data[3]\r\n      }\r\n      this.setState({userData: tmpUserData});\r\n      //Handle books data\r\n      var tmpBooksList = [];\r\n      response.data.slice(1).map((book)=>{\r\n        // Determine if book return date is extendable API returns 0 if book has NOT been extended yet\r\n        var extendable;\r\n        if(book[4]===0){\r\n          extendable = true;\r\n        }else{\r\n          extendable = false;\r\n        }\r\n        tmpBooksList.push({\r\n          title: book[2],\r\n          author: book[0]+\" \"+book[1],\r\n          daysLeft: book[3],\r\n          isExtendable: extendable,\r\n          order_id: book[5]\r\n        })\r\n      })\r\n      this.setState({booksList: tmpBooksList});\r\n    }.bind(this))\r\n    .catch(function(err){\r\n      console.log(err);\r\n      this.refreshToken();\r\n      this.fetchDataFromAPI();\r\n    }.bind(this))\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.fetchDataFromAPI();\r\n  }\r\n\r\n  handleClick(){\r\n    console.log(\"Showing password change\");\r\n    this.setState({isPasswordChangeVisible: true});\r\n  }\r\n  closePasswordChange(){\r\n    this.setState({isPasswordChangeVisible: false});\r\n  }\r\n  \r\n\r\n\r\n  extendBook(){\r\n    const token = localStorage.getItem(\"token\");\r\n    const header ={headers: {'Authorization': `Bearer ${token}`}}\r\n    const data = {\r\n      order_id: this.state.bookToExtend\r\n    }\r\n    console.log(data);\r\n    axios.post(\"https://g20.labagh.pl/api/prolong\", data ,header)\r\n    .then(function(response){\r\n      console.log(response);\r\n      this.fetchDataFromAPI();\r\n    }.bind(this))\r\n    .catch(function(err){\r\n      console.log(err);\r\n      // Refresh expired token\r\n      if(err.response.status===422){\r\n        this.refreshToken();\r\n        this.extendBook();\r\n      }\r\n    }.bind(this))\r\n  }\r\n  // This way the setState is done first and then the extendBook function\r\n  handleBookExtend(e){\r\n    this.setState({\r\n      bookToExtend: e.target.getAttribute('name')\r\n    }, () => {\r\n      this.extendBook();\r\n    })\r\n  }\r\n\r\n  render(){\r\n    var index=0;\r\n    return(\r\n      <div className={styles.mainPane}>\r\n        <div className={styles.profilePane}> \r\n          <div className={styles.title}> Profile </div>\r\n          <div className={styles.profileDataPane}>\r\n            \r\n            <div className={styles.data}> First Name: {this.state.userData.fname} </div>\r\n            \r\n           \r\n            <div className={styles.data}> Last Name: {this.state.userData.lname} </div>\r\n        \r\n            <div className={styles.data}> Email: {this.state.userData.email} </div>\r\n\r\n            <div className={styles.data}> Rented books in total: {this.state.userData.read_books} </div>\r\n\r\n            <button className={styles.pwdButton} onClick={this.handleClick}> Change password </button>\r\n          </div>\r\n        </div>\r\n\r\n             <div className={styles.separator}></div>\r\n\r\n        <div className={styles.booksPane}> \r\n          <div className={styles.title}> Your books</div>\r\n          <div className={styles.books}>\r\n            <table className={styles.table}>\r\n              <tbody>\r\n              <tr className={styles.tableTitleBar}>\r\n                <th> Title </th>\r\n                <th> Author </th>\r\n                <th > Days left </th>\r\n                <th > Extension </th>\r\n              </tr>\r\n              {\r\n              this.state.booksList.map((book) => {\r\n              const style = index%2===0 ? {backgroundColor: \"rgb(255, 222, 130, 0.5)\"} : {backgroundColor: \"rgb(219, 191, 112, 0.5)\"}\r\n              index += 1;\r\n              return  <tr style={style}> \r\n                        <td > {book.title} </td>\r\n                        <td > {book.author} </td>\r\n                        <td > {book.daysLeft} </td>\r\n                        <td > {book.isExtendable ? <button className={styles.extendButton} onClick={this.handleBookExtend} name={book.order_id}> Extend </button> : null} </td>\r\n                      </tr>\r\n              })}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n        {this.state.isPasswordChangeVisible ? <PasswordChange closePasswordChange={this.closePasswordChange} refreshToken={this.refreshToken} /> : null}\r\n      </div>\r\n    )\r\n  }\r\n}\r\nexport default Account;","C:\\Users\\rafal\\Pulpit\\bd-project-react-2\\src\\components\\More.js",[],"C:\\Users\\rafal\\Pulpit\\bd-project-react-2\\src\\components\\PasswordChange.js",[],"C:\\Users\\rafal\\Pulpit\\bd-project-react-2\\src\\components\\Manage.js",["91"],"import React from 'react';\r\nimport axios from 'axios';\r\nimport styles from './styles/manage.module.css';\r\nimport Returns from './Returns';\r\nimport Collection from './Collection';\r\n\r\nclass Manage extends React.Component{\r\n  constructor(){\r\n    super();\r\n    this.state = {\r\n      isReturnsVisible: true,\r\n      isCollectionVisible: false\r\n    };\r\n    // Bindings\r\n    this.showReturns = this.showReturns.bind(this);\r\n    this.showCollection = this.showCollection.bind(this);\r\n  }\r\n  showReturns(){\r\n    console.log(\"Showing returns\");\r\n    this.setState({isReturnsVisible: true});\r\n    this.setState({isCollectionVisible: false});\r\n  }\r\n  showCollection(){\r\n    console.log(\"Showing collection\");\r\n    this.setState({isCollectionVisible: true});\r\n    this.setState({isReturnsVisible: false});\r\n  }\r\n  render(){\r\n    \r\n    return(\r\n      <div className={styles.main}>  \r\n        <div className={styles.menu}>\r\n          <button className={styles.menuButton} onClick={this.showReturns}> Returns </button>\r\n          <button className={styles.menuButton} onClick={this.showCollection} > Collection </button>\r\n        </div>\r\n\r\n        {this.state.isReturnsVisible ? <Returns /> : null}\r\n        {this.state.isCollectionVisible ? <Collection /> : null}    \r\n      \r\n      \r\n      </div>    \r\n    )\r\n  }\r\n}\r\n\r\nexport default Manage;\r\n","C:\\Users\\rafal\\Pulpit\\bd-project-react-2\\src\\components\\Returns.js",["92","93"],"import React from 'react';\r\nimport axios from 'axios';\r\nimport styles from './styles/returns.module.css';\r\n\r\nclass Returns extends React.Component{\r\n  constructor(){\r\n    super();\r\n    this.state = {\r\n     booksList: [],\r\n     fname: \"\",\r\n     lname: \"\",\r\n     id: null,\r\n     isTableVisible: false,\r\n     tableInfo: \"Check user's orders\",\r\n     bookToReturn: null\r\n    };\r\n    // Bindings\r\n    this.refreshToken = this.refreshToken.bind(this);\r\n    this.fetchDataFromAPI = this.fetchDataFromAPI.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.returnBook = this.returnBook.bind(this);\r\n    this.handleBookReturn = this.handleBookReturn.bind(this);\r\n  }\r\n\r\n  refreshToken(){\r\n    var refresh_token = localStorage.getItem(\"refresh_token\");\r\n    axios.get(\"https://g20.labagh.pl/api/refresh\", {\r\n      headers: {\r\n        'Authorization': `Bearer ${refresh_token}`\r\n      }\r\n    }).then(function(response){\r\n      console.log(\"Adding fresh access token to localstorage\");\r\n      localStorage.setItem(\"token\", response.data.access_token);\r\n    }.bind(this)).catch((err) =>{\r\n      console.log(err);\r\n    })\r\n  }\r\n\r\n  fetchDataFromAPI(){\r\n    const token = localStorage.getItem(\"token\");\r\n    const data = {\r\n      user_id: this.state.id\r\n    }\r\n    const header ={headers: {'Authorization': `Bearer ${token}`}}\r\n\r\n    axios.post(\"https://g20.labagh.pl/api/get_user_data\", data, header)\r\n    .then(function(response){\r\n      console.log(response.data);\r\n      if(response.data.length===0){\r\n        this.setState({\r\n          isTableVisible: false,\r\n          tableInfo: \"User does not exist\",\r\n          fname: \"\",\r\n          lname: \"\"\r\n        });\r\n        return 0;\r\n      }\r\n      // Handle user data\r\n      var user_data = response.data[0]; // Always first array in response data ???\r\n      var tmpUserData = {\r\n        fname: user_data[0],\r\n        lname: user_data[1],\r\n        email: user_data[2],\r\n        read_books: user_data[3]\r\n      }\r\n\r\n      this.setState({\r\n        fname: tmpUserData.fname,\r\n        lname: tmpUserData.lname\r\n      })\r\n      //Handle books data\r\n      var tmpBooksList = [];\r\n      response.data.slice(1).map((book)=>{\r\n        // Determine if book return date is extendable API returns 0 if book has NOT been extended yet\r\n        var extendable;\r\n        if(book[4]===0){\r\n          extendable = true;\r\n        }else{\r\n          extendable = false;\r\n        }\r\n        tmpBooksList.push({\r\n          title: book[2],\r\n          author: book[0]+\" \"+book[1],\r\n          daysLeft: book[3],\r\n          isExtendable: extendable,\r\n          order_id: book[5]\r\n        })\r\n      })\r\n      this.setState({\r\n        booksList: tmpBooksList,\r\n        isTableVisible: true\r\n      });\r\n      console.log(this.state.booksList);\r\n      if(this.state.booksList.length === 0){\r\n        this.setState({\r\n          isTableVisible: false,\r\n          tableInfo: \"Register is empty\"\r\n        })\r\n      }\r\n    }.bind(this))\r\n    .catch(function(err){\r\n      console.log(err);\r\n      if(err.response.status===401 || err.response.status===422){\r\n        this.refreshToken();\r\n        this.fetchDataFromAPI();\r\n      }\r\n    }.bind(this))\r\n  }\r\n\r\n  handleChange(e){\r\n    this.setState({\r\n      [e.target.name]: e.target.value,\r\n      tableInfo: \"Check user's orders\",\r\n    });\r\n    console.log(this.state);\r\n  }\r\n  handleSubmit(e){\r\n    e.preventDefault();\r\n    this.fetchDataFromAPI();\r\n  }\r\n\r\n  handleBookReturn(e){\r\n    this.setState({\r\n      bookToReturn: e.target.getAttribute('name')\r\n    }, () => {\r\n      this.returnBook();\r\n    })\r\n  }\r\n  \r\n  returnBook(){\r\n    // Return book for real \r\n    const token = localStorage.getItem(\"token\");\r\n    const header ={headers: {'Authorization': `Bearer ${token}`}}\r\n    const data = {\r\n      order_id: this.state.bookToReturn,\r\n      user_id: localStorage.getItem(\"id\")\r\n    }\r\n    console.log(data);\r\n    axios.post(\"https://g20.labagh.pl/api/return_book\", data ,header)\r\n    .then(function(response){\r\n      console.log(response);\r\n      this.fetchDataFromAPI();\r\n    }.bind(this))\r\n    .catch(function(err){\r\n      console.log(err);\r\n      // Refresh expired token\r\n      if(err.response.status===422){\r\n        this.refreshToken();\r\n        this.returnBook();\r\n      }\r\n    }.bind(this))\r\n  }\r\n  \r\n  render(){\r\n    var index = 0;\r\n    var table =  <table className={styles.table}>\r\n                  <tbody>\r\n                    <tr className={styles.tableTitleBar}>\r\n                      <th> Title </th>\r\n                      <th> Author </th>\r\n                      <th > Days left </th>\r\n                      <th > Return </th>\r\n                    </tr>\r\n                    {\r\n                    this.state.booksList.map((book) => {\r\n                    const style = index%2===0 ? {backgroundColor: \"rgb(255, 222, 130, 0.5)\"} : {backgroundColor: \"rgb(219, 191, 112, 0.5)\"}\r\n                    index += 1;\r\n                    return  <tr style={style}> \r\n                              <td > {book.title} </td>\r\n                              <td > {book.author} </td>\r\n                              <td > {book.daysLeft} </td>\r\n                              <td> <button name={book.order_id} onClick={this.handleBookReturn} className={styles.returnButton}> Return </button></td>\r\n                            </tr>\r\n                    })}\r\n                  </tbody>\r\n                </table>\r\n    return(\r\n      <div>\r\n        <div className={styles.userData}>\r\n          <form onSubmit={this.handleSubmit}>\r\n            <div className={styles.inputLabel}> User ID</div>\r\n              <input \r\n                className={styles.input} \r\n                type=\"text\"\r\n                required\r\n                onChange={this.handleChange}\r\n                name=\"id\"\r\n                value={this.state.id}\r\n              />\r\n            \r\n            <button className={styles.submitButton}> Check </button>\r\n\r\n            <div className={styles.outputLabel}> User first name</div>\r\n            <input \r\n              className={styles.output} \r\n              type=\"text\" \r\n              onChange={this.handleChange}\r\n              name=\"fname\"\r\n              disabled\r\n              value={this.state.fname}\r\n            />\r\n            \r\n            <div className={styles.outputLabel}> User last name</div>\r\n            <input className={styles.output} \r\n              type=\"text\"\r\n              disabled\r\n              onChange={this.handleChange}\r\n              name=\"lname\"\r\n              value={this.state.lname}\r\n            />\r\n            \r\n          </form>\r\n        </div>\r\n\r\n        <div className={styles.userBooks}>\r\n         {this.state.isTableVisible ? table : <div className={styles.tableInfo}> {this.state.tableInfo} </div>}\r\n        </div>\r\n\r\n      </div> \r\n     \r\n    )\r\n  }\r\n}\r\n\r\nexport default Returns;\r\n","C:\\Users\\rafal\\Pulpit\\bd-project-react-2\\src\\components\\Collection.js",["94","95","96"],"import React from 'react';\r\nimport axios from 'axios';\r\n\r\nimport Collection_AddData from './Collection_AddData';\r\nimport Collection_AddBooks from './Collection_AddBooks';\r\nclass Collection extends React.Component{\r\n  constructor(){\r\n    super();\r\n    this.state =  {\r\n   \r\n    };\r\n    // Bindings\r\n    this.refreshToken = this.refreshToken.bind(this);\r\n  }\r\n  refreshToken(){\r\n    var refresh_token = localStorage.getItem(\"refresh_token\");\r\n    axios.get(\"https://g20.labagh.pl/api/refresh\", {\r\n      headers: {\r\n        'Authorization': `Bearer ${refresh_token}`\r\n      }\r\n    }).then(function(response){\r\n      console.log(\"Adding fresh access token to localstorage\");\r\n      localStorage.setItem(\"token\", response.data.access_token);\r\n    }.bind(this)).catch((err) =>{\r\n      console.log(err);\r\n    })\r\n  }\r\n  render(){\r\n    return(\r\n      <div>\r\n        <Collection_AddData refreshToken={this.refreshToken}/>\r\n        <Collection_AddBooks refreshToken={this.refreshToken} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Collection;\r\n","C:\\Users\\rafal\\Pulpit\\bd-project-react-2\\src\\components\\Collection_AddData.js",["97"],"import React from 'react';\r\nimport axios from 'axios';\r\nimport styles from './styles/collectionAddData.module.css';\r\n\r\n\r\nclass Collection_AddData extends React.Component{\r\n  constructor(){\r\n    super();\r\n    this.state = {\r\n      newCategory: \"\",\r\n      newAuthorFname: \"\",\r\n      newAuthorLname: \"\",\r\n      newCategory: \"\",\r\n      newPublisher: \"\",\r\n      acpInfo: \"\",\r\n      url: \"\",\r\n      data: []\r\n    };\r\n    // Bindings\r\n     // Bindings\r\n     this.handleChange = this.handleChange.bind(this);\r\n     this.handleSubmit = this.handleSubmit.bind(this);\r\n     this.submit = this.submit.bind(this);\r\n  }\r\n  \r\n  handleChange(e){\r\n    this.setState({\r\n      [e.target.name]: e.target.value,\r\n      acpInfo: \"\"\r\n    })\r\n    console.log(this.state.newAuthor);\r\n    console.log(this.state.newCategory);\r\n    console.log(this.state.newPublisher);\r\n  }\r\n  \r\n  submit(){\r\n     // Return book for real \r\n     const token = localStorage.getItem(\"token\");\r\n     const header ={headers: {'Authorization': `Bearer ${token}`}}\r\n     const data = this.state.data;\r\n     const url = this.state.url;\r\n     axios.post(url, data ,header)\r\n     .then(function(response){\r\n       console.log(response);\r\n       this.setState({\r\n         acpInfo: \"Done\",\r\n         newAuthorFname: \"\",\r\n         newAuthorLname: \"\",\r\n         newCategory: \"\",\r\n         newPublisher: \"\"\r\n       })\r\n     }.bind(this))\r\n     .catch(function(err){\r\n       console.log(err);\r\n       // Refresh expired token\r\n       if(err.response.status===422){\r\n         this.props.refreshToken();\r\n         this.submit();\r\n       }\r\n       else if(err.response.status===500){\r\n         this.setState({\r\n          acpInfo: \"Provided value already exists\",\r\n          newAuthorFname: \"\",\r\n          newAuthorLname: \"\",\r\n          newCategory: \"\",\r\n          newPublisher: \"\"\r\n         })\r\n       }\r\n     }.bind(this))\r\n  }\r\n  // This function set appriote states\r\n  handleSubmit(item){\r\n    return e => {\r\n      e.preventDefault();\r\n      if(item === \"newAuthor\"){\r\n        this.setState({\r\n          data: {\r\n            user_id: localStorage.getItem(\"id\"),\r\n            fname: this.state.newAuthorFname,\r\n            lname: this.state.newAuthorLname\r\n          },\r\n          url: \"https://g20.labagh.pl/api/add_author\"\r\n        }, () =>{ this.submit();});\r\n      }else if(item === \"newCategory\"){\r\n        this.setState({\r\n          data: {\r\n            user_id: localStorage.getItem(\"id\"),\r\n            name: this.state.newCategory\r\n          },\r\n          url: \"https://g20.labagh.pl/api/add_category\"\r\n        }, () => {this.submit();})\r\n      }else if(item === \"newPublisher\"){\r\n        this.setState({\r\n          data: {\r\n            user_id: localStorage.getItem(\"id\"),\r\n            name: this.state.newPublisher\r\n          },\r\n          url: \"https://g20.labagh.pl/api/add_publisher\"\r\n        }, () => {this.submit();})\r\n      }\r\n    }\r\n  }\r\n  render(){\r\n    return(\r\n      <div>\r\n        <div className={styles.leftPane}>\r\n          <div className={styles.title}> Book Informations </div>\r\n          <form onSubmit={this.handleSubmit('newAuthor')}>\r\n            <div className={styles.acpWrapper}>\r\n            <div className={styles.inputLabel}> Add author </div>\r\n            <input \r\n              className={styles.input} \r\n              type=\"text\" \r\n              onChange={this.handleChange}\r\n              name=\"newAuthorFname\"\r\n              required\r\n              value={this.state.newAuthorFname}\r\n              placeholder=\"First name\"\r\n            />\r\n            <div></div>\r\n            <input \r\n            className={styles.input} \r\n            type=\"text\" \r\n            onChange={this.handleChange}\r\n            name=\"newAuthorLname\"\r\n            required\r\n            value={this.state.newAuthorLname}\r\n            placeholder=\"Last name\"\r\n            />\r\n            <button className={styles.button} type=\"submit\"> Add </button>\r\n            \r\n            </div>\r\n          </form>\r\n\r\n          <form onSubmit={this.handleSubmit('newCategory')}>\r\n          <div className={styles.acpWrapper}>\r\n            <div className={styles.inputLabel}> Add category </div>\r\n            <input \r\n              className={styles.input} \r\n              type=\"text\" \r\n              onChange={this.handleChange}\r\n              name=\"newCategory\"\r\n              required\r\n              value={this.state.newCategory}\r\n            />\r\n            <button className={styles.button} type=\"submit\"> Add </button>\r\n            \r\n            </div>\r\n          </form>\r\n\r\n          <form onSubmit={this.handleSubmit('newPublisher')}>\r\n          <div className={styles.acpWrapper}>\r\n            <div className={styles.inputLabel}> Add publisher </div>\r\n            <input \r\n              className={styles.input} \r\n              type=\"text\" \r\n              onChange={this.handleChange}\r\n              name=\"newPublisher\"\r\n              required\r\n              value={this.state.newPublisher}\r\n            />\r\n            <button className={styles.button} type=\"submit\"> Add </button>\r\n            \r\n            </div>\r\n          </form>\r\n          <div className={styles.acpInfo}> {this.state.acpInfo} </div>\r\n        </div>\r\n\r\n        <div className={styles.rightPane}>\r\n          \r\n        </div>  \r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Collection_AddData;\r\n","C:\\Users\\rafal\\Pulpit\\bd-project-react-2\\src\\components\\Collection_AddBooks.js",[],{"ruleId":"98","replacedBy":"99"},{"ruleId":"100","replacedBy":"101"},{"ruleId":"98","replacedBy":"102"},{"ruleId":"100","replacedBy":"103"},{"ruleId":"104","severity":1,"message":"105","line":58,"column":7,"nodeType":"106","messageId":"107","endLine":58,"endColumn":11,"fix":"108"},{"ruleId":"109","severity":1,"message":"110","line":78,"column":42,"nodeType":"111","messageId":"112","endLine":78,"endColumn":44},{"ruleId":"109","severity":1,"message":"110","line":81,"column":47,"nodeType":"111","messageId":"112","endLine":81,"endColumn":49},{"ruleId":"109","severity":1,"message":"110","line":84,"column":48,"nodeType":"111","messageId":"112","endLine":84,"endColumn":50},{"ruleId":"109","severity":1,"message":"110","line":112,"column":41,"nodeType":"111","messageId":"112","endLine":112,"endColumn":43},{"ruleId":"104","severity":1,"message":"105","line":131,"column":8,"nodeType":"106","messageId":"107","endLine":131,"endColumn":12,"fix":"113"},{"ruleId":"109","severity":1,"message":"110","line":188,"column":47,"nodeType":"111","messageId":"112","endLine":188,"endColumn":49},{"ruleId":"109","severity":1,"message":"110","line":217,"column":32,"nodeType":"111","messageId":"112","endLine":217,"endColumn":34},{"ruleId":"114","severity":1,"message":"115","line":219,"column":18,"nodeType":"116","messageId":"107","endLine":219,"endColumn":20},{"ruleId":"117","severity":1,"message":"118","line":291,"column":21,"nodeType":"119","endLine":291,"endColumn":51},{"ruleId":"120","severity":1,"message":"121","line":380,"column":15,"nodeType":"119","endLine":380,"endColumn":28},{"ruleId":"104","severity":1,"message":"105","line":34,"column":7,"nodeType":"106","messageId":"107","endLine":34,"endColumn":11,"fix":"122"},{"ruleId":"109","severity":1,"message":"110","line":62,"column":40,"nodeType":"111","messageId":"112","endLine":62,"endColumn":42},{"ruleId":"123","severity":1,"message":"124","line":2,"column":8,"nodeType":"125","messageId":"126","endLine":2,"endColumn":13},{"ruleId":"104","severity":1,"message":"105","line":35,"column":7,"nodeType":"106","messageId":"107","endLine":35,"endColumn":11,"fix":"127"},{"ruleId":"109","severity":1,"message":"110","line":74,"column":40,"nodeType":"111","messageId":"112","endLine":74,"endColumn":42},{"ruleId":"104","severity":1,"message":"105","line":24,"column":7,"nodeType":"106","messageId":"107","endLine":24,"endColumn":11,"fix":"128"},{"ruleId":"129","severity":1,"message":"130","line":31,"column":9,"nodeType":"131","endLine":31,"endColumn":63},{"ruleId":"129","severity":1,"message":"132","line":32,"column":9,"nodeType":"131","endLine":32,"endColumn":65},{"ruleId":"133","severity":1,"message":"134","line":13,"column":7,"nodeType":"135","messageId":"107","endLine":13,"endColumn":18},"no-native-reassign",["136"],"no-negated-in-lhs",["137"],["136"],["137"],"no-extra-bind","The function binding is unnecessary.","CallExpression","unexpected",{"range":"138","text":"139"},"array-callback-return","Array.prototype.map() expects a return value from arrow function.","ArrowFunctionExpression","expectedInside",{"range":"140","text":"139"},"eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","react/jsx-no-duplicate-props","No duplicate props allowed","JSXAttribute","react/style-prop-object","Style prop value must be an object",{"range":"141","text":"139"},"no-unused-vars","'axios' is defined but never used.","Identifier","unusedVar",{"range":"142","text":"139"},{"range":"143","text":"139"},"react/jsx-pascal-case","Imported JSX component Collection_AddData must be in PascalCase or SCREAMING_SNAKE_CASE","JSXOpeningElement","Imported JSX component Collection_AddBooks must be in PascalCase or SCREAMING_SNAKE_CASE","no-dupe-keys","Duplicate key 'newCategory'.","ObjectExpression","no-global-assign","no-unsafe-negation",[1831,1842],"",[4078,4089],[1129,1140],[1125,1136],[743,754]]